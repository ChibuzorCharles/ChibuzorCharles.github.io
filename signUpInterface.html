<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/MyEntireProject/signupstylesonly.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
</head>
<body>
    <form id="signupForm" onsubmit="validateAndRedirect(event)">
        <h4><b style="color: white;">Sign Up</b></h4>
            <input id="username" class="carry" type="text" placeholder="User Name" autocomplete="on">
            <br/>
            <br/>
           
            <input id="electronicmail" class="carry" type="email"  placeholder="E-mail"/>
            <br/>
            <br/>
            <input id="originalpassword" class="carry" type="password" placeholder="Password">
            <br><br>
            
                <input id="confirmoriginalpassword" class="carry" type="password" placeholder="Confirm Password"/><br>
                <input type="checkbox" onclick="myFunction()"><b style="color: white;">Show Password</b>
            <br><br>
              <div>
                <button type="submit" style="padding: 5px; color: white; border-radius: 5px;border: 2px solid black; cursor: pointer;">Sign Up</button>
                <i class="fa-brands fa-google" style="color: #c81919;"></i>
                <p id="signupError"></p>
            </div>
            <hr>
            <div style="background-color: transparent; font-size: 0.8vw; margin-left: 8px; margin-right: 8px; font-family: Verdana, Geneva, Tahoma, sans-serif; border: 0.7px solid black; border-radius: 6px; color: antiquewhite;">By signing up, you are confirming that you have read and agreed to the <a href="/MyEntireProject/userAgreement.html" style="text-decoration: none; color:rgb(17, 188, 222)
              ;">User Agreement</a> and <a  href="/MyEntireProject/privacyPolicy.html" style="color: rgb(17, 188, 222); text-decoration: none;">Privacy Policy</a>.</div>
          
        </form>

        <script>
            function myFunction() {
            var x = document.getElementById("originalpassword");
            var y = document.getElementById("confirmoriginalpassword");
            if (x.type === "password") {
                x.type = "text";
                y.type = "text"
            } else {
                x.type = "password";
                y.type = "password"
            }
        }
            
            const signupForm = document.getElementById('signupForm');
        
            signupForm.addEventListener('submit', (event) => {
                event.preventDefault();
                console.log('Form submission intercepted')
        
                const name = document.getElementById('username').value;
                const email = document.getElementById('electronicmail').value;
                const password = document.getElementById('originalpassword').value;
                const confirmPassword = document.getElementById('confirmoriginalpassword').value;

                // let users = JSON.parse(localstorage.getItem('users')) || [];
                // users.push({ email: email, password: password });
                // localStorage.setItem('users', JSON.stringify(users));

                // alert('Sign Up successful! You can now log in.');

        
                if (!name||!email||!password||!confirmPassword) {
                    alert('Please fill out all the fields.');
                    return;
                    console.log('Validation failed: Missing fields')
                }

                if (password!==confirmPassword) {
                    alert('Passwords do not match');
                    return;
                    console.log('Validatin failed: Passwords do not match')
                }
        
                console.log('Validation passed: Redirecting')
        
                window.location.href='MyExercises_6.html'
            })
            
            document.addEventListener('DOMContentLoaded', () => {
                    const savedFormData = localStorage.getItem('formData');
                    if (savedFormData) {
                        const formData = JSON.parse(savedFormData);
                        document.getElementById('username').value = formData.name || '';
                        document.getElementById('electronicmail').value = formData.email || '';
                    }
                });
        
                console.log('DOM fully loaded and parsed')
        
                document.getElementById('signupForm')
                document.addEventListener('submit', (event) => {
                    event.preventDefault();
        
                    const name = document.getElementById('username').value;
                    const email = document.getElementById('electronicmail').value;
        
                    const formData = { name, email };
                    localStorage.setItem('formData', JSON.stringify(formData));
        
                    let users = JSON.parse(localStorage.getItem('users')) || [];
                    users.push(formData);
                    localStorage.setItem('users', JSON.stringify(users));
        
                });

                //  let users = JSON.parse(localstorage.getItem('users')) || [];
                
                // if (users.find(user => user.email === email)) {
                //     document.getElementById('signupError').textContent = 'This Email already exists!';
                //     return;
                // }
                // users.push({ email: email, password: password });
                // localStorage.setItem('users', JSON.stringify(users));

                // alert('Sign Up successful! You can now log in.');

                // window.location.href='MyExercises_6.html'
           </script>
</body>
</html>